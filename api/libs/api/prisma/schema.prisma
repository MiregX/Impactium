generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "cockroachdb"
  url      = env("API_DATABASE_URL")
}

enum LoginType {
  discord
  google
}

model User {
  id        String   @id @default(cuid())
  lastLogin LoginType
  register  DateTime @default(now())
  email     String?  @unique
  logins    Login[]
  player    Player?
}

model Login {
  id          String      @id @default(cuid())
  type        LoginType
  avatar      String?
  displayName String
  locale      String
  user        User        @relation(fields: [uid], references: [id])
  uid         String      @unique
}

model Player {
  user         User           @relation(fields: [uid], references: [id])
  uid          String         @unique
  nickname     String?        @unique
  password     String?
  register     DateTime?
  skin         Skin?
  oldNicknames OldNicknames[]
}

model OldNicknames {
  nickname String
  player   Player             @relation(fields: [uid], references: [uid])
  uid      String             @unique
}

model Skin {
  title       String
  icon        String
  source      String
  player      Player          @relation(fields: [uid], references: [uid])
  uid         String          @unique
}
