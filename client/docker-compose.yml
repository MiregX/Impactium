version: '3.0'
services:
  client:
    container_name: client
    build:
      context: .
      dockerfile: ./Dockerfile.prod
      target: production
    restart: on-failure
    ports:
      - ${APP_PORT}:${APP_PORT}
      - ${APP_DEBUG_PORT}:${APP_DEBUG_PORT}
    environment:
      - PORT=${APP_PORT}
      - DEBUG_PORT=${APP_DEBUG_PORT}
    env_file: ../.env
    networks:
      - main
    command: npm run start